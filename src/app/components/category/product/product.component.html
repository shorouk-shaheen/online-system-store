<div class="container">
  <div class="row">
    <div *ngFor="let prd of getProductByCatID(); let i = index" class="col-md-3">
      <div id="card" class="card text-center mb-3">
        <img [src]="prd.img" class="card-img-top product-img" alt="pouduct" />
        <h3 [ngClass]="{ sold_out: prd.quantity === 0 }" id="sold_out_{{ i }}" href=""></h3>
        <div class="text-center card-body">
          <h5 class="card-title">
            {{ prd.name }}
          </h5>
          <p class="card-text">{{ prd.price }} <span>LE</span></p>
          <div class="card-operations">
            <button (click)="openModal()" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal"
              [ngClass]="{ disabled: prd.quantity === 0 }" href="#" class="btn add-to-cart-btn d-block">
              Add To Cart
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Your Shopping Cart</h5>
      </div>
      <div class="modal-body">
        <section>
          <div class="row">
            <div class="col-lg-8">
              <div class="card wish-list mb-3">
                <div class="card-body">
                  <h5 class="cart-items-no mb-4">Cart (<span>2</span> items)</h5>

                  <div *ngFor="let prd of cartProducts" class="row mb-4">
                    <div class="col-md-5 col-lg-3 col-xl-3">
                      <div class="view zoom overlay z-depth-1 rounded mb-3 mb-md-0">
                        <img class="cart-img img-fluid"
                          [src]="prd.img"
                          alt="Sample" />
                      </div>
                    </div>
                    <div class="col-md-7 col-lg-9 col-xl-9">
                      <div>
                        <div class="d-flex justify-content-between">
                          <div>
                            <h5> {{ prd.name }} </h5>
                          </div>
                          <div>


                          <div class="def-number-input number-input safari_only mb-0 w-100">
                              <button (click)="totalPrice(prd.Price,pCount.value)"  onclick="this.parentNode.querySelector('input[type=number]').stepDown()"
                                class="minus">
                                <i class="fas fa-minus"></i>
                              </button>
                              <input #pCount class="quantity" min="0" [max]="prd.quantity" name="quantity" value="1" type="number" />
                              <button (click)="totalPrice(prd.Price,pCount.value)" onclick="this.parentNode.querySelector('input[type=number]').stepUp()"
                                class="plus">
                                <i class="fas fa-plus"></i>
                              </button>
                            </div>


                          </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                          <p class="mb-0">
                            <span>$<strong> {{ prd.price }} </strong></span>
                          </p>
                        </div>
                      </div>
                    </div>
                    
                  </div>


                  <hr class="mb-4" />
                </div>
              </div>
              <div class="address-card card mb-3">
                <div class="card-body">
                  <h5 class="cart_address mb-2">Your Address</h5>
                  <p class="mb-0">Lorem ipsum dolor sit amet consectetur adipisicing elit. Enim officia est natus omnis veniam at quisquam et sint. Maxime, necessitatibus.</p>
                </div>
              </div>
              <p>
                <button (click)="openCollapse()" class="new-address-btn btn btn-primary" data-bs-toggle="collapse"  role="button" aria-expanded="false"  aria-controls="newAddress">
                  Add New Address
                </button>
              </p>
              <div class="collapse" id="newAddress">
                <div class="card card-body">
                  <div class="mb-3">
                    <label for="exampleFormControlTextarea1" class="form-label"></label>
                    <textarea placeholder="Enter your new address" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="mb-3">The total amount of</h5>

                  <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                      Temporary amount
                      <span>$ {{ tempAmount }} </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                      Shipping
                      <span>$ {{ shipping }} </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                      <div>
                        <strong>The total amount of</strong>
                        <strong>
                          <p class="mb-0">(including VAT)</p>
                        </strong>
                      </div>
                      <span><strong>$ {{ finalPrice }} </strong></span>
                    </li>
                  </ul>

                  <button type="button" class="checkout-btn btn  btn-block">
                    go to checkout
                  </button>
                </div>
              </div>
              <div class="card mb-3">
                <div class="card-body">
                  <a class="dark-grey-text d-flex justify-content-between" data-toggle="collapse"
                    href="#collapseExample1" aria-expanded="false" aria-controls="collapseExample1">
                    Add a discount code (optional)
                    <span><i class="fas fa-chevron-down pt-1"></i></span>
                  </a>

                  <div class="collapse" id="collapseExample1">
                    <div class="mt-3">
                      <div class="md-form md-outline mb-0">
                        <input type="text" id="discount-code1" class="form-control font-weight-light"
                          placeholder="Enter discount code" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="modal-footer">
        <button (click)="closeModal()" type="button" class="btn btn-secondary" data-bs-dismiss="modal">
         Continue Shopping
        </button>
        <button type="button" class="go-to-cart-btn btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>